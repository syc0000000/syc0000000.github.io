[{"title":"WPF-MVVM思维与数据绑定","path":"/2023/11/20/WPF-MVVM思维与数据绑定/","content":"概述可以认为MVVM思想脱胎于MVC架构，但不同的是，给每个View，搭配一个ViewModel，后端代码更新ViewModel就可以自动改变Vew的内容，具体到WPF或者说XML上，就是减少了原来的Dom操作，进一步抽象化。 把界面和业务逻辑分离，这是MVVM的根本目的。WPF的依赖属性、数据绑定等机制，很好地帮助我们实现MVVM模式，基本可以做到在界面层不出现业务逻辑代码。 再幼儿园一点，翻译成人话：我不关心界面，我只在乎数据，我要数据驱动界面，但界面的风吹草动我也要知道，不过我不主动去处理，我只通过数据去改变界面。 【联系下文】绑定提供数据，消息提供改变。 MVVM数据绑定实现原理在WPF中，View和ViewModel的交互是通过DataContext这一对象来完成的。 先从一个具体的例子看起 例如： 用户名显示框绑定了名称为UserName的属性，UserName属性究竟在哪里定义（甚至不一定存在），View是不关心的。它一直在等待着消息，当有人告诉它，UserName已经改成XXX了，它马上把显示框的内容改成XXX。 ViewModel里面定义了大量的依赖属性。当这些属性改变时，它们会触发一个属性更改的通知事件。例如UserName&#x3D;”XXX”;这个语句执行后，ViewModel就像广播一样大声地喊：UserName改成XXX了！同样的，有没有人听到，如何处理，它都不关心。 以示例学习View如下： Binding的写法就是这样，但具体怎么绑定成功上后面说。 123456789&lt;Grid&gt; &lt;Grid.RowDefinitions&gt; &lt;RowDefinition/&gt; &lt;RowDefinition/&gt; &lt;RowDefinition Height=&quot;50&quot;/&gt; &lt;/Grid.RowDefinitions&gt; &lt;TextBox Grid.Row=&quot;0&quot; Text=&quot;&#123;Binding UserName ,Mode=TwoWay&#125;&quot;/&gt; &lt;TextBlock Grid.Row=&quot;1&quot; Text=&quot;&#123;Binding UserName&#125;&quot;/&gt;&lt;/Grid&gt; 还差ViewModel 在ModelView这个类中，根据前面的具体例子，我们先分析一下核心是什么。 核心是一个变量：UserName。 这样，后端其他代码要修改视图的UserName，直接修改ModelView里面的这个UserName变量就可以了。 所以，代码至少是： 1234public class LoginViewModel&#123; public string UserName;&#125; 再搭配一个构造函数，一个类变量。 12345678910public class LoginViewModel&#123; public LoginViewModel() &#123; obj.UserName = &quot;test&quot;; &#125; private User obj = new User(); public string UserName;&#125; 但是，之前例子里面讲的，在UserName修改时，需要“通知”View。那么，通知所需要用到的函数就是： 1RaisePropertyChanged(&quot;UserName&quot;); 表示：告诉View，属性UserName发生了变化。 这个函数在另一个WPF基础类INotifyPropertyChanged 里面，我们需要继承这个类来获得这个方法。一般的，我们会对这个类进行二次封装，加上一些比如检查参数是否存在这一类的功能，这里先不提。假定封装后的类名字叫ObservableObject，可以暂时视为跟原生类一样。 那么，把这个函数写在UserName的get代码里面，一旦UserName发生改变，就会自动通知View，很合理。 那么最终代码： 1234567891011121314151617181920212223public class LoginViewModel:ObservableObject&#123; public LoginViewModel() &#123; obj.UserName = &quot;test&quot;; &#125; private User obj = new User(); public string UserName &#123; get &#123; return obj.UserName; &#125; set &#123; obj.UserName = value; this.RaisePropertyChanged(&quot;UserName&quot;); &#125; &#125;&#125; 写完之后，为把这个ModelView跟某个View绑定在一起，这样才能找到这个ModelView里面的变量用来绑定。 在页面对应的后台代码文件里面写 12345678public partial class LoginWindow : Window&#123; public LoginWindow() &#123; InitializeComponent(); this.DataContext = new LoginViewModel(); &#125;&#125; 关键是那句给DataContext赋值。 这样就完成了数据绑定。","tags":["MVVM","WPF","绑定"],"categories":["WPF"]},{"title":"自组NAS——All In One","path":"/2023/10/25/自组NAS——All In One/","content":"自组NAS——All In OneNAS是啥NAS全称 Network Attached Storage 网络附属存储，简单来说就是局域网里面的一块网络硬盘。但2023年了，NAS已经不仅仅局限于此，而是集局域网的私有的云存储云备份神器，私有影音娱乐下载中心，局域网web服务器，软路由为一身的局域网中心。 当然，如果是品牌NAS，出于法律的因素，显然做不到这样的功能，另一方面，出于成本考虑，品牌NAS的溢价实在过高（华为家庭存储，群辉NAS），穷逼大学生决定自己组建。 它的组成简单来说就是一个低功耗的静音个人电脑。这里我选择x86平台，可拓展性更强，功能更全，刷入拓展性强且美观群晖系统（黑群晖），或者unraid听说也不错。 配置挑选回顾刚刚的要求，简单来说就是以下几个条件: 便宜（富佬无视），性能最好能强点 低功耗 低噪音 x86 扩展性强（硬盘口多） 双千兆网口（软路由） 支持影音娱乐 能流畅的传输4k视频（不一定硬解） 硬解h265 1080p视频（不一定需要） 这么多条件限制，可选的配置组合并不多。 CPU作为一个NAS，对CPU其实没啥性能要求。所以选CPU实际上是在选核显，在核显相同的情况下选一个便宜功耗低的。 附带两张表格，仅供参考，里面型号不全且可能存在错误，一定要到官网核对后再选择 网络表格，供参考 QQ图片20230202125946 对比之后，我选择了奔腾g4900t这颗U 主频：2.9 Ghz TDP：35 w 支持内存：DDR4 64G（支持ecc内存） 核显：UHD610 支持虚拟化 当然，这个U肯定不是价格卡极限的U，但为了运行流畅稍微加了一点冗余，毕竟是All In One。 主板主板我需要一个有双千兆网口的主板，供电其实都无所谓。但是主板能支持的硬盘数量很重要，我选择了华擎H170M-ITX&#x2F;AC。 板子上有6个 USB 接口，还有几个 USB 跳线，太恐怖了 这个主板上g4900t需要刷BIOS，生命在于折腾nnd。 为了不影响观感，刷BIOS过程记录在文末。 内存能用就行，内存选择 金士顿2133MHZ，因为便宜又能买。4GB*2 共90元。 机箱NAS 的机箱首选肯定是品牌 NAS 的淘汰机箱，比如暴风二期，蜗牛星际。 不建议买diy的机箱，可能存在非常致命的磁盘共振问题，硬盘和硬盘共振很容易导致硬盘损坏，硬盘和机箱共振会发出很难受的噪音。 我选择了蜗牛星际的四盘位机箱，附带电源。 这种的就可以 散热散热器一定注意高度，经常需要下压式散热，但更多情况下，你需要搜超薄散热器，就是那种涡轮的或者简单的风扇散热就可以。 简单的散热器 硬盘待定 等待到货，上机测试手机先吃拍一张全家福 全家福 当时忘买散热器了。。 因为需要刷BIOS，所以又临时买了一颗G4400开机进BIOS。 到时候可以卖掉，如果主板不需要刷BIOS，那肯定不用这么折腾。 顺利刷BIOS，H170成功点亮G4900t。 连显示器点亮一次点亮 CPU温度高是因为当时忘记买散热器了。。 image-20230313235335163 没散热器没硅脂，于是一点小小的旺仔加中华震撼。 image-20230313235704689 测试sata口 稳定性测试CPU-z多核跑分600+，不错，相当于13900k的单核了。 实测win11日用很卡哈哈。 差不多了 ，开装可惜装机没拍视频 插上跳线电源线，装上散热器，接好sata线，大力出奇迹干进去。 差点滴血认亲之后，终于还是装进去了。","tags":["NAS"],"categories":["NAS"]},{"path":"/about/index.html","content":"# Hi I’m NBB ! 苔袁枚白日不到处，青春恰自来。苔花如米小，也学牡丹开。很喜欢的小诗。 基本信息 -> 昵称： NBB 学历： 软件工程本科在读 -> 兴趣方向：Java 后端开发｜小程序开发｜… 项目经历 时间线：2023 年 10 月 25 日加入电子学院 CAE 项目组2023 年 10 月 12 日大一新生课外创新实践项目完成，答辩立大功。2022 年 12 月 11 日大一新生课外创新实践项目开始，加油！！！列表：完成时间项目名称级别结果2023.10手势识别人机交互校级通过验收暂时没了"},{"path":"/js/wrapImage.js","content":"$(document).ready(function() { $.fancybox.defaults.backFocus = \"false\"; $.fancybox.defaults.trapFocus = \"false\"; if (window.location.href.indexOf('202') !== -1) { $('img').each(function() { if ($(this).parent().hasClass('social')) return; if ($(this).parent().hasClass('fancybox')) return; if ($(this).hasClass('nofancybox')) return; var alt = this.alt; if (alt) $(this).after('' + alt + ''); $(this).wrap(''); }); $(this).find('.fancybox').each(function(){ $(this).attr('rel', 'article'); }); $(\"a[href$='.jpg'],a[href$='.png'],a[href$='.gif'],a[href$='.webp']\").attr('rel', 'gallery').fancybox({ helpers : { title: { type: 'inside'} } }); } });"},{"path":"/js/fancybox/jquery.fancybox.min.css","content":"body.compensate-for-scrollbar{overflow:hidden}.fancybox-active{height:auto}.fancybox-is-hidden{left:-9999px;margin:0;position:absolute!important;top:-9999px;visibility:hidden}.fancybox-container{-webkit-backface-visibility:hidden;height:100%;left:0;outline:none;position:fixed;-webkit-tap-highlight-color:transparent;top:0;-ms-touch-action:manipulation;touch-action:manipulation;transform:translateZ(0);width:100%;z-index:99992}.fancybox-container *{box-sizing:border-box}.fancybox-bg,.fancybox-inner,.fancybox-outer,.fancybox-stage{bottom:0;left:0;position:absolute;right:0;top:0}.fancybox-outer{-webkit-overflow-scrolling:touch;overflow-y:auto}.fancybox-bg{background:#1e1e1e;opacity:0;transition-duration:inherit;transition-property:opacity;transition-timing-function:cubic-bezier(.47,0,.74,.71)}.fancybox-is-open .fancybox-bg{opacity:.9;transition-timing-function:cubic-bezier(.22,.61,.36,1)}.fancybox-caption,.fancybox-infobar,.fancybox-navigation .fancybox-button,.fancybox-toolbar{direction:ltr;opacity:0;position:absolute;transition:opacity .25s ease,visibility 0s ease .25s;visibility:hidden;z-index:99997}.fancybox-show-caption .fancybox-caption,.fancybox-show-infobar .fancybox-infobar,.fancybox-show-nav .fancybox-navigation .fancybox-button,.fancybox-show-toolbar .fancybox-toolbar{opacity:1;transition:opacity .25s ease 0s,visibility 0s ease 0s;visibility:visible}.fancybox-infobar{color:#ccc;font-size:13px;-webkit-font-smoothing:subpixel-antialiased;height:44px;left:0;line-height:44px;min-width:44px;mix-blend-mode:difference;padding:0 10px;pointer-events:none;top:0;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fancybox-toolbar{right:0;top:0}.fancybox-stage{direction:ltr;overflow:visible;transform:translateZ(0);z-index:99994}.fancybox-is-open .fancybox-stage{overflow:hidden}.fancybox-slide{-webkit-backface-visibility:hidden;display:none;height:100%;left:0;outline:none;overflow:auto;-webkit-overflow-scrolling:touch;padding:44px;position:absolute;text-align:center;top:0;transition-property:transform,opacity;white-space:normal;width:100%;z-index:99994}.fancybox-slide:before{content:\"\";display:inline-block;font-size:0;height:100%;vertical-align:middle;width:0}.fancybox-is-sliding .fancybox-slide,.fancybox-slide--current,.fancybox-slide--next,.fancybox-slide--previous{display:block}.fancybox-slide--image{overflow:hidden;padding:44px 0}.fancybox-slide--image:before{display:none}.fancybox-slide--html{padding:6px}.fancybox-content{background:#fff;display:inline-block;margin:0;max-width:100%;overflow:auto;-webkit-overflow-scrolling:touch;padding:44px;position:relative;text-align:left;vertical-align:middle}.fancybox-slide--image .fancybox-content{animation-timing-function:cubic-bezier(.5,0,.14,1);-webkit-backface-visibility:hidden;background:transparent;background-repeat:no-repeat;background-size:100% 100%;left:0;max-width:none;overflow:visible;padding:0;position:absolute;top:0;transform-origin:top left;transition-property:transform,opacity;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:99995}.fancybox-can-zoomOut .fancybox-content{cursor:zoom-out}.fancybox-can-zoomIn .fancybox-content{cursor:zoom-in}.fancybox-can-pan .fancybox-content,.fancybox-can-swipe .fancybox-content{cursor:grab}.fancybox-is-grabbing .fancybox-content{cursor:grabbing}.fancybox-container [data-selectable=true]{cursor:text}.fancybox-image,.fancybox-spaceball{background:transparent;border:0;height:100%;left:0;margin:0;max-height:none;max-width:none;padding:0;position:absolute;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.fancybox-spaceball{z-index:1}.fancybox-slide--iframe .fancybox-content,.fancybox-slide--map .fancybox-content,.fancybox-slide--pdf .fancybox-content,.fancybox-slide--video .fancybox-content{height:100%;overflow:visible;padding:0;width:100%}.fancybox-slide--video .fancybox-content{background:#000}.fancybox-slide--map .fancybox-content{background:#e5e3df}.fancybox-slide--iframe .fancybox-content{background:#fff}.fancybox-iframe,.fancybox-video{background:transparent;border:0;display:block;height:100%;margin:0;overflow:hidden;padding:0;width:100%}.fancybox-iframe{left:0;position:absolute;top:0}.fancybox-error{background:#fff;cursor:default;max-width:400px;padding:40px;width:100%}.fancybox-error p{color:#444;font-size:16px;line-height:20px;margin:0;padding:0}.fancybox-button{background:rgba(30,30,30,.6);border:0;border-radius:0;box-shadow:none;cursor:pointer;display:inline-block;height:44px;margin:0;padding:10px;position:relative;transition:color .2s;vertical-align:top;visibility:inherit;width:44px}.fancybox-button,.fancybox-button:link,.fancybox-button:visited{color:#ccc}.fancybox-button:hover{color:#fff}.fancybox-button:focus{outline:none}.fancybox-button.fancybox-focus{outline:1px dotted}.fancybox-button[disabled],.fancybox-button[disabled]:hover{color:#888;cursor:default;outline:none}.fancybox-button div{height:100%}.fancybox-button svg{display:block;height:100%;overflow:visible;position:relative;width:100%}.fancybox-button svg path{fill:currentColor;stroke-width:0}.fancybox-button--fsenter svg:nth-child(2),.fancybox-button--fsexit svg:first-child,.fancybox-button--pause svg:first-child,.fancybox-button--play svg:nth-child(2){display:none}.fancybox-progress{background:#ff5268;height:2px;left:0;position:absolute;right:0;top:0;transform:scaleX(0);transform-origin:0;transition-property:transform;transition-timing-function:linear;z-index:99998}.fancybox-close-small{background:transparent;border:0;border-radius:0;color:#ccc;cursor:pointer;opacity:.8;padding:8px;position:absolute;right:-12px;top:-44px;z-index:401}.fancybox-close-small:hover{color:#fff;opacity:1}.fancybox-slide--html .fancybox-close-small{color:currentColor;padding:10px;right:0;top:0}.fancybox-slide--image.fancybox-is-scaling .fancybox-content{overflow:hidden}.fancybox-is-scaling .fancybox-close-small,.fancybox-is-zoomable.fancybox-can-pan .fancybox-close-small{display:none}.fancybox-navigation .fancybox-button{background-clip:content-box;height:100px;opacity:0;position:absolute;top:calc(50% - 50px);width:70px}.fancybox-navigation .fancybox-button div{padding:7px}.fancybox-navigation .fancybox-button--arrow_left{left:0;left:env(safe-area-inset-left);padding:31px 26px 31px 6px}.fancybox-navigation .fancybox-button--arrow_right{padding:31px 6px 31px 26px;right:0;right:env(safe-area-inset-right)}.fancybox-caption{background:linear-gradient(0deg,rgba(0,0,0,.85) 0,rgba(0,0,0,.3) 50%,rgba(0,0,0,.15) 65%,rgba(0,0,0,.075) 75.5%,rgba(0,0,0,.037) 82.85%,rgba(0,0,0,.019) 88%,transparent);bottom:0;color:#eee;font-size:14px;font-weight:400;left:0;line-height:1.5;padding:75px 44px 25px;pointer-events:none;right:0;text-align:center;z-index:99996}@supports (padding:max(0px)){.fancybox-caption{padding:75px max(44px,env(safe-area-inset-right)) max(25px,env(safe-area-inset-bottom)) max(44px,env(safe-area-inset-left))}}.fancybox-caption--separate{margin-top:-50px}.fancybox-caption__body{max-height:50vh;overflow:auto;pointer-events:all}.fancybox-caption a,.fancybox-caption a:link,.fancybox-caption a:visited{color:#ccc;text-decoration:none}.fancybox-caption a:hover{color:#fff;text-decoration:underline}.fancybox-loading{animation:a 1s linear infinite;background:transparent;border:4px solid #888;border-bottom-color:#fff;border-radius:50%;height:50px;left:50%;margin:-25px 0 0 -25px;opacity:.7;padding:0;position:absolute;top:50%;width:50px;z-index:99999}@keyframes a{to{transform:rotate(1turn)}}.fancybox-animated{transition-timing-function:cubic-bezier(0,0,.25,1)}.fancybox-fx-slide.fancybox-slide--previous{opacity:0;transform:translate3d(-100%,0,0)}.fancybox-fx-slide.fancybox-slide--next{opacity:0;transform:translate3d(100%,0,0)}.fancybox-fx-slide.fancybox-slide--current{opacity:1;transform:translateZ(0)}.fancybox-fx-fade.fancybox-slide--next,.fancybox-fx-fade.fancybox-slide--previous{opacity:0;transition-timing-function:cubic-bezier(.19,1,.22,1)}.fancybox-fx-fade.fancybox-slide--current{opacity:1}.fancybox-fx-zoom-in-out.fancybox-slide--previous{opacity:0;transform:scale3d(1.5,1.5,1.5)}.fancybox-fx-zoom-in-out.fancybox-slide--next{opacity:0;transform:scale3d(.5,.5,.5)}.fancybox-fx-zoom-in-out.fancybox-slide--current{opacity:1;transform:scaleX(1)}.fancybox-fx-rotate.fancybox-slide--previous{opacity:0;transform:rotate(-1turn)}.fancybox-fx-rotate.fancybox-slide--next{opacity:0;transform:rotate(1turn)}.fancybox-fx-rotate.fancybox-slide--current{opacity:1;transform:rotate(0deg)}.fancybox-fx-circular.fancybox-slide--previous{opacity:0;transform:scale3d(0,0,0) translate3d(-100%,0,0)}.fancybox-fx-circular.fancybox-slide--next{opacity:0;transform:scale3d(0,0,0) translate3d(100%,0,0)}.fancybox-fx-circular.fancybox-slide--current{opacity:1;transform:scaleX(1) translateZ(0)}.fancybox-fx-tube.fancybox-slide--previous{transform:translate3d(-100%,0,0) scale(.1) skew(-10deg)}.fancybox-fx-tube.fancybox-slide--next{transform:translate3d(100%,0,0) scale(.1) skew(10deg)}.fancybox-fx-tube.fancybox-slide--current{transform:translateZ(0) scale(1)}@media (max-height:576px){.fancybox-slide{padding-left:6px;padding-right:6px}.fancybox-slide--image{padding:6px 0}.fancybox-close-small{right:-6px}.fancybox-slide--image .fancybox-close-small{background:#4e4e4e;color:#f2f4f6;height:36px;opacity:1;padding:6px;right:0;top:0;width:36px}.fancybox-caption{padding-left:12px;padding-right:12px}@supports (padding:max(0px)){.fancybox-caption{padding-left:max(12px,env(safe-area-inset-left));padding-right:max(12px,env(safe-area-inset-right))}}}.fancybox-share{background:#f4f4f4;border-radius:3px;max-width:90%;padding:30px;text-align:center}.fancybox-share h1{color:#222;font-size:35px;font-weight:700;margin:0 0 20px}.fancybox-share p{margin:0;padding:0}.fancybox-share__button{border:0;border-radius:3px;display:inline-block;font-size:14px;font-weight:700;line-height:40px;margin:0 5px 10px;min-width:130px;padding:0 15px;text-decoration:none;transition:all .2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}.fancybox-share__button:link,.fancybox-share__button:visited{color:#fff}.fancybox-share__button:hover{text-decoration:none}.fancybox-share__button--fb{background:#3b5998}.fancybox-share__button--fb:hover{background:#344e86}.fancybox-share__button--pt{background:#bd081d}.fancybox-share__button--pt:hover{background:#aa0719}.fancybox-share__button--tw{background:#1da1f2}.fancybox-share__button--tw:hover{background:#0d95e8}.fancybox-share__button svg{height:25px;margin-right:7px;position:relative;top:-1px;vertical-align:middle;width:25px}.fancybox-share__button svg path{fill:#fff}.fancybox-share__input{background:transparent;border:0;border-bottom:1px solid #d7d7d7;border-radius:0;color:#5d5b5b;font-size:14px;margin:10px 0 0;outline:none;padding:10px 15px;width:100%}.fancybox-thumbs{background:#ddd;bottom:0;display:none;margin:0;-webkit-overflow-scrolling:touch;-ms-overflow-style:-ms-autohiding-scrollbar;padding:2px 2px 4px;position:absolute;right:0;-webkit-tap-highlight-color:rgba(0,0,0,0);top:0;width:212px;z-index:99995}.fancybox-thumbs-x{overflow-x:auto;overflow-y:hidden}.fancybox-show-thumbs .fancybox-thumbs{display:block}.fancybox-show-thumbs .fancybox-inner{right:212px}.fancybox-thumbs__list{font-size:0;height:100%;list-style:none;margin:0;overflow-x:hidden;overflow-y:auto;padding:0;position:absolute;position:relative;white-space:nowrap;width:100%}.fancybox-thumbs-x .fancybox-thumbs__list{overflow:hidden}.fancybox-thumbs-y .fancybox-thumbs__list::-webkit-scrollbar{width:7px}.fancybox-thumbs-y .fancybox-thumbs__list::-webkit-scrollbar-track{background:#fff;border-radius:10px;box-shadow:inset 0 0 6px rgba(0,0,0,.3)}.fancybox-thumbs-y .fancybox-thumbs__list::-webkit-scrollbar-thumb{background:#2a2a2a;border-radius:10px}.fancybox-thumbs__list a{-webkit-backface-visibility:hidden;backface-visibility:hidden;background-color:rgba(0,0,0,.1);background-position:50%;background-repeat:no-repeat;background-size:cover;cursor:pointer;float:left;height:75px;margin:2px;max-height:calc(100% - 8px);max-width:calc(50% - 4px);outline:none;overflow:hidden;padding:0;position:relative;-webkit-tap-highlight-color:transparent;width:100px}.fancybox-thumbs__list a:before{border:6px solid #ff5268;bottom:0;content:\"\";left:0;opacity:0;position:absolute;right:0;top:0;transition:all .2s cubic-bezier(.25,.46,.45,.94);z-index:99991}.fancybox-thumbs__list a:focus:before{opacity:.5}.fancybox-thumbs__list a.fancybox-thumbs-active:before{opacity:1}@media (max-width:576px){.fancybox-thumbs{width:110px}.fancybox-show-thumbs .fancybox-inner{right:110px}.fancybox-thumbs__list a{max-width:calc(100% - 10px)}}"},{"path":"/js/fancybox/jquery.fancybox.min.js","content":"// ================================================== // fancyBox v3.5.7 // // Licensed GPLv3 for open source use // or fancyBox Commercial License for commercial use // // http://fancyapps.com/fancybox/ // Copyright 2019 fancyApps // // ================================================== !function(t,e,n,o){\"use strict\";function i(t,e){var o,i,a,s=[],r=0;t&&t.isDefaultPrevented()||(t.preventDefault(),e=e||{},t&&t.data&&(e=h(t.data.options,e)),o=e.$target||n(t.currentTarget).trigger(\"blur\"),(a=n.fancybox.getInstance())&&a.$trigger&&a.$trigger.is(o)||(e.selector?s=n(e.selector):(i=o.attr(\"data-fancybox\")||\"\",i?(s=t.data?t.data.items:[],s=s.length?s.filter('[data-fancybox=\"'+i+'\"]'):n('[data-fancybox=\"'+i+'\"]')):s=[o]),r=n(s).index(o),r"}]